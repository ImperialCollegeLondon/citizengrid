{% load cg_template_filters %} 
{% block panel-content %}

<div class="modal-dialog">
	<div class="modal-content">
         <div class=" alert-info modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">
                  &times;
            </button>
            <h4 class="modal-title" id="myModalLabel">{{ app.name }}</h4>
         </div>
         <div id="myModalBody" class="modal-body">     
         	<div class="panel panel-primary">
				<div class="panel-body">
					<div>
						<div class="appinfo">
							<img class="app-icon" src={{app.iconfile }}>{{ app.description }}
						</div>
					</div>
					<div class="appinfo">
						<h4>Usage</h4>	
						<div class="content">
				          You first ran this application on {{ my_stats.creation_time }}
				          <p>You have run this application {{ my_stats.run_count }} times</p>
				      	</div>
      					<hr>
						<h4>Available Cloud Instances</h4>
						<table class="appinfo">
							<tr>
								<td class="cloud_images" style="vertical-align: top;">
									<div class="table-responsive">
										<table class="table table-condensed">
											<thead>
												<th>Type</th>
												<th>Cloud</th>
												<th>Image ID</th>
												<th>Cloud URL</th>
											</thead>
											<tbody>
												{% for image in ec2_images %} 
													<tr>
														<td>{{ image.image_type }}</td>
														<td>EC2</td>
														<td>{{ image.image_id }}</td>
														<td>{{ image.zone_url }}</td>
													</tr>
												{% endfor %} 
													
												{% for image in os_images %} 
													<tr>
														<td>{{ image.image_type }}</td>
														<td>Openstack</td>
														<td>{{ image.image_id }}</td>
														<td>{{ image.zone_url }}</td>
													</tr>
													{% endfor %}
												</tbody>
											</table>
										</div>
									</td>
								</tr>
							</table>
						</div>	
		
						<div class="appinfo">
							<h4>Files</h4>
							<table class="appinfo">
								<tr>
									<td class="cloud_images" style="vertical-align: top;">
										<div class="table-responsive">
											<table class="table table-condensed">
												<thead>
													<th>Type</th>
													<th>Name</th>
												</thead>
												<tbody>
									{% for key, files_list_dict in file_info.items %} 
										{% for app_file_dict in files_list_dict %}
										<tr>
											<td>{{ app_file_dict.formatstring }}</td>
											<td>{{ app_file_dict.name }}</td>
										</tr>
										{% endfor %} 
									{% endfor %}
												</tbody>
											</table>
										</div>
									</td>
								</tr>
							</table>
						</div>					
						<div class="appinfo">
							<h4>Current Status</h4>
								<table class="table table-condensed">
									<thead>
											<th>Instance ID</th>
											<th>Address</th>
											<th>Status</th>
									</thead>
									<tbody>
									{% for instance in instance_list %} 
									<tr>
										<td>{{ instance.id }}</td>
										<td>{{ instance.ip }}</td>
										<td>{{ instance.state }}</td>
									</tr>
									{% endfor %}
										
									</tbody>
								</table>
							</div>
							<hr class="appdivider">
							<div class="appreginfo">Application registered by {{ app.owner.username }} at 
									{{ app.creation_time|date:'H:i' }} on 
									{{ app.creation_time|date:'d/m/Y' }}.</div>
							</div>
					</div>   
         		</div>
		         <div class="modal-footer">
		            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		         </div>
      		</div><!-- /.modal-content -->
		</div><!-- /.modal -->
{% endblock %}




